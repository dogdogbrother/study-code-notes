# JWT实现认证与授权

知乎的这个项目登录是用的 JWT,另一个微博的项目用的是 seesion.

## JWT 和 seesion 的比较

* 扩展性
seesion是有状态的登录,例如你得用 radis 去保存所有用户的登录信息,如果用户特别特别多, radis 性能吃紧,进行性能拓展会有些麻烦.

JWT 是 token 授权的形式,本身不用记录用户的登录状态,就没有这样的烦恼.

* RESTful API
在 RESTful 架构中,是要求无状态的,seesion 就直接不符合这样的要求,所以如果是 RESTful 风格的项目的话,通常是使用 JWT 的. 

* 性能.
JWT 性能不是很好,每次 http 请求的时候,都要在 header 中带上加密后的 token,这个 token 包含了很多信息,是比较大的,是不小的开销.  

seesion 就没这个问题,不过也有不好的一点,就是携带的信息比较少,需要每次都要在数据库里面查询一次.

JWT其实就是用空间换时间,不过通常来讲 seesion 性能好一点点,

* 时效性
JWT 比较差,因为 JWT 只能等待时间到了才能销毁,但是 seesion 可以主动在 radis 中销毁.

举两个例子,一个用户是管理员权限,然后 root 给他降级成了普通用户,但是他还是可以行使管理员的权限的,因为 JWT 没有过去.

再比如,你的账号被人异地登录了,即使你修改了密码,盗号者还是可以操作你的账号,因为 JWT 没法主动销毁.

seesion 就没有这个问题.

## node 中使用 JWT
```sh
npm i jsonwebtoken --save
```

