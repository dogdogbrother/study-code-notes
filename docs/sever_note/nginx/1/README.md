# 认识Nginx

## Nginx的三个主要应用场景

1. 静态资源
html/css/js/图片等等其实用不着应用服务,直接nginx提供静态服务就行.

2. API服务
Nginx本身是集成了js语言的,我们可以通过直接在nginx层调用数据库等等操作,这样就不用程序服务直接提供接口了.

3. 反向代理
为了应对大访问量,反向代理衍生出两种场景,一种是负载均衡.

负载均衡可以帮我们调度服务器之间的使用调度,另一种可以容灾,就是当某个服务器运行异常,即使发现后把请求转给正常的服务器.

另一种是缓存加速,反向代理可以把一些不经常变动的内容缓存在Nginx层,这样当用户请求时,就不用经过一系列其他工具就直接返回,提高效率.

## Nginx为什么会火

如果我们有1GHz的电脑升级到2G赫兹,那么性能就能提升一倍.

但是现在因为物理极限的限制,摩尔定律已经失效了,CPU性能的提升转向了多核发展.但是2核的CPU并不能比1核CPU提升一倍的性能,这是因为很多服务和软件没有做好多核的准备.

Apache就是这种低效的服务,Apache一个连接对应一个进程,只有当结束了一个请求后,才能进行下一个请求.进程间的操作耗费性能,如果有几百万个用户,那么Apache建立几百万个进程吗?这显示是不现实的.

## Nginx的优点

1. 高并发,高性能.
高并发是我们对每个链接所占的内存尽可能的小就可以达到. 目前比较主流的服务器32核64G内存,可以轻松达到数千万的并发链接.如果是比较简单的静态资源请求,可以达到一百万的RPS(每秒请求数).

2. 可扩展性好
是可以模块化使用的.

3. 高可靠性
可以几年不停机.

4. 热部署
正常的服务,如果要升级,就要kill掉对应的进程.Nginx有热部署,无感知升级.

5. BSD许可证
不仅开源,还可以自己魔改再用到商业用途中,这都是合法的.

## Nginx的组成

1. 二进制可执行文件
就是nginx本身.

2. Nginx.conf配置文件
控制nginx行为.

3. access.log访问日志
记录每一条http请求信息.

4. error.log错误日志
定位问题.

## 有好几个nginx
除了来源的Nginx和不开源的Nginx plus,还有阿里巴巴的Tengine,和openResty(有免费和商业版的).