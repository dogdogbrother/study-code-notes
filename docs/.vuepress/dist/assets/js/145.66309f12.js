(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{136:function(a,s,t){"use strict";t.r(s);var n=t(0),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"使用loader打包静态资源-图片篇"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用loader打包静态资源-图片篇","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用Loader打包静态资源(图片篇)")]),a._v(" "),t("h2",{attrs:{id:"file-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-loader","aria-hidden":"true"}},[a._v("#")]),a._v(" file-loader")]),a._v(" "),t("ol",[t("li",[a._v("接着4-笔记接着来,如果我们想打包过后的文件命名不被修改的话,添加配置如下.")])]),a._v(" "),t("div",{staticClass:"language-JavaScript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[a._v("rules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/\\.jpg$/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            use"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    loader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'file-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                        name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'[name].[ext]'")]),a._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br")])]),t("p",[t("code",[a._v("[name].[ext]")]),a._v("的意思是,老的名字和老的后缀,这个规则是placeholder占位符,可以打开官网webpack>loaders>file-loader查看响应的属性.举个例子.\n"),t("code",[a._v("[name]_[hash].[ext]")]),a._v(",打包出来的图片的名字就是nama_2kj2j3nj988x.jpg.")]),a._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[a._v("目前打包好的所以内容都是放在dist目录下的,如果我们想要把所以的图片资源都放在dist-images文件夹下.需要添加配置如下.")])]),a._v(" "),t("div",{staticClass:"language-JavaScript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[a._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'[name].[ext]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    outputPatch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'images/'")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h2",{attrs:{id:"url-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url-loader","aria-hidden":"true"}},[a._v("#")]),a._v(" url-loader")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("file-loader的功能url-loader也都有.我们把"),t("code",[a._v("file-loader")]),a._v("更换成"),t("code",[a._v("url-loader")]),a._v(",其他配置并不改动.\n重新打包,打包成功.但是有个问题,就是图片资源并没有被打包在dist目录内,但是我们打开html页面,却发现实际图片已经有了.")])]),a._v(" "),t("li",[t("p",[a._v("什么情况呢,我们打开bundle.js文件,发现有如下一行代码.\n"),t("code",[a._v('eval("module.exports=\\"data:image/jpeg;base64,/9j/4aaqsk....)')]),a._v("\n原来url-loader帮我们把图片资源已base64的形式加载到页面中了.\n这种的做法有好有坏,好的是js输入图片,少了一次http请求.但是js文件变大,导致加载js时间变长,页面空白比较久,得不偿失.\n所以优解的方案是,我们对于大的图片的话,就打包在dist文件夹,几KB图片的话就没有必要单独为他http请求,就打包在js文件中.")])]),a._v(" "),t("li",[t("p",[a._v("只要添加limit参数即可.")])])]),a._v(" "),t("div",{staticClass:"language-JavaScript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[a._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'[name].[ext]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    outputPatch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'images/'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    limit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10240")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("这样再次打包,所有大于10kb的图片都会放到dist文件下面,小于10kb的会注入到js文件中.")]),a._v(" "),t("h2",{attrs:{id:"知识点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#知识点","aria-hidden":"true"}},[a._v("#")]),a._v(" 知识点")]),a._v(" "),t("ol",[t("li",[a._v("url-loader和file-loader基本一致,但是url-loader多出一个limit配置.")])])])}),[],!1,null,null,null);s.default=e.exports}}]);