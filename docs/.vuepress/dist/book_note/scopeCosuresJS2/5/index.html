<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>语法 | blog</title>
    <meta name="description" content="森林看过啥都记录下">
    
    
    <link rel="preload" href="/assets/css/0.styles.0c36c39d.css" as="style"><link rel="preload" href="/assets/js/app.1c103905.js" as="script"><link rel="preload" href="/assets/js/2.757f8567.js" as="script"><link rel="preload" href="/assets/js/42.67ce10bd.js" as="script"><link rel="prefetch" href="/assets/js/10.891c5f5a.js"><link rel="prefetch" href="/assets/js/100.41c9753b.js"><link rel="prefetch" href="/assets/js/101.bf964985.js"><link rel="prefetch" href="/assets/js/102.46b6afbc.js"><link rel="prefetch" href="/assets/js/103.04be5e5e.js"><link rel="prefetch" href="/assets/js/104.f5b0e084.js"><link rel="prefetch" href="/assets/js/105.ccee58c4.js"><link rel="prefetch" href="/assets/js/106.2c0e354c.js"><link rel="prefetch" href="/assets/js/107.452c8409.js"><link rel="prefetch" href="/assets/js/108.7e22d312.js"><link rel="prefetch" href="/assets/js/109.bbeaadad.js"><link rel="prefetch" href="/assets/js/11.f8becabc.js"><link rel="prefetch" href="/assets/js/110.87297f57.js"><link rel="prefetch" href="/assets/js/111.356205f4.js"><link rel="prefetch" href="/assets/js/112.eade5674.js"><link rel="prefetch" href="/assets/js/113.f7b8193b.js"><link rel="prefetch" href="/assets/js/114.5c3ccf00.js"><link rel="prefetch" href="/assets/js/115.b85168b0.js"><link rel="prefetch" href="/assets/js/116.ba5dd777.js"><link rel="prefetch" href="/assets/js/117.9758c061.js"><link rel="prefetch" href="/assets/js/118.25691b2b.js"><link rel="prefetch" href="/assets/js/119.47367bbc.js"><link rel="prefetch" href="/assets/js/12.6705096e.js"><link rel="prefetch" href="/assets/js/120.17ccb7d4.js"><link rel="prefetch" href="/assets/js/121.98753818.js"><link rel="prefetch" href="/assets/js/122.bd3438f2.js"><link rel="prefetch" href="/assets/js/123.2139945f.js"><link rel="prefetch" href="/assets/js/124.d6a4aae4.js"><link rel="prefetch" href="/assets/js/125.f7ca19b4.js"><link rel="prefetch" href="/assets/js/126.def2f875.js"><link rel="prefetch" href="/assets/js/127.52438ecd.js"><link rel="prefetch" href="/assets/js/128.8764bf24.js"><link rel="prefetch" href="/assets/js/129.5c22aad2.js"><link rel="prefetch" href="/assets/js/13.63cb93e4.js"><link rel="prefetch" href="/assets/js/130.61476640.js"><link rel="prefetch" href="/assets/js/131.94ce27ae.js"><link rel="prefetch" href="/assets/js/132.4ead9f01.js"><link rel="prefetch" href="/assets/js/133.36a328a7.js"><link rel="prefetch" href="/assets/js/134.fc251673.js"><link rel="prefetch" href="/assets/js/135.c5d6024b.js"><link rel="prefetch" href="/assets/js/136.1a6f0866.js"><link rel="prefetch" href="/assets/js/137.ba0c191d.js"><link rel="prefetch" href="/assets/js/138.ea65945c.js"><link rel="prefetch" href="/assets/js/139.b078cf18.js"><link rel="prefetch" href="/assets/js/14.3c806101.js"><link rel="prefetch" href="/assets/js/140.96b84878.js"><link rel="prefetch" href="/assets/js/141.123f1410.js"><link rel="prefetch" href="/assets/js/142.32e6baf7.js"><link rel="prefetch" href="/assets/js/143.dac1ab5f.js"><link rel="prefetch" href="/assets/js/144.6e126242.js"><link rel="prefetch" href="/assets/js/145.66309f12.js"><link rel="prefetch" href="/assets/js/146.e894a783.js"><link rel="prefetch" href="/assets/js/147.f2604c88.js"><link rel="prefetch" href="/assets/js/148.c098eb16.js"><link rel="prefetch" href="/assets/js/149.2a133bf0.js"><link rel="prefetch" href="/assets/js/15.80e1e477.js"><link rel="prefetch" href="/assets/js/150.8509d21b.js"><link rel="prefetch" href="/assets/js/151.341a7c13.js"><link rel="prefetch" href="/assets/js/152.fa9b6291.js"><link rel="prefetch" href="/assets/js/153.1741b723.js"><link rel="prefetch" href="/assets/js/154.57bdded4.js"><link rel="prefetch" href="/assets/js/155.5af61839.js"><link rel="prefetch" href="/assets/js/156.6cc66e3a.js"><link rel="prefetch" href="/assets/js/157.6b0f3fda.js"><link rel="prefetch" href="/assets/js/158.f2b74929.js"><link rel="prefetch" href="/assets/js/159.b99c9e0e.js"><link rel="prefetch" href="/assets/js/16.487ccd19.js"><link rel="prefetch" href="/assets/js/160.ee3bcc61.js"><link rel="prefetch" href="/assets/js/161.223c44d8.js"><link rel="prefetch" href="/assets/js/162.97ee2350.js"><link rel="prefetch" href="/assets/js/163.009fe315.js"><link rel="prefetch" href="/assets/js/164.ad85f88b.js"><link rel="prefetch" href="/assets/js/165.7cff12c1.js"><link rel="prefetch" href="/assets/js/166.cd40efd5.js"><link rel="prefetch" href="/assets/js/167.f78291cc.js"><link rel="prefetch" href="/assets/js/168.535ab286.js"><link rel="prefetch" href="/assets/js/169.1b0a038f.js"><link rel="prefetch" href="/assets/js/17.91200c04.js"><link rel="prefetch" href="/assets/js/170.97387dc1.js"><link rel="prefetch" href="/assets/js/171.ea465527.js"><link rel="prefetch" href="/assets/js/172.a63d2a31.js"><link rel="prefetch" href="/assets/js/173.1584c0d5.js"><link rel="prefetch" href="/assets/js/174.e235bf70.js"><link rel="prefetch" href="/assets/js/175.10bec1a3.js"><link rel="prefetch" href="/assets/js/176.05b9d24b.js"><link rel="prefetch" href="/assets/js/177.242d14ad.js"><link rel="prefetch" href="/assets/js/178.cb0de632.js"><link rel="prefetch" href="/assets/js/179.d8880535.js"><link rel="prefetch" href="/assets/js/18.93a6726c.js"><link rel="prefetch" href="/assets/js/180.353fec87.js"><link rel="prefetch" href="/assets/js/181.b692fbfc.js"><link rel="prefetch" href="/assets/js/182.55e3b88f.js"><link rel="prefetch" href="/assets/js/183.f6eb1e9f.js"><link rel="prefetch" href="/assets/js/184.7a0fd586.js"><link rel="prefetch" href="/assets/js/185.e7f8b788.js"><link rel="prefetch" href="/assets/js/186.cc98a1ed.js"><link rel="prefetch" href="/assets/js/187.84eb202e.js"><link rel="prefetch" href="/assets/js/188.7e1d9871.js"><link rel="prefetch" href="/assets/js/189.9fdc6431.js"><link rel="prefetch" href="/assets/js/19.669126b4.js"><link rel="prefetch" href="/assets/js/190.b3557ec4.js"><link rel="prefetch" href="/assets/js/191.a96c39b0.js"><link rel="prefetch" href="/assets/js/192.9c48871c.js"><link rel="prefetch" href="/assets/js/193.f8e352c2.js"><link rel="prefetch" href="/assets/js/194.39108c6d.js"><link rel="prefetch" href="/assets/js/195.6b0a9b59.js"><link rel="prefetch" href="/assets/js/196.97518a0b.js"><link rel="prefetch" href="/assets/js/197.5b5c7d05.js"><link rel="prefetch" href="/assets/js/198.50dead75.js"><link rel="prefetch" href="/assets/js/199.7bbb3b36.js"><link rel="prefetch" href="/assets/js/20.59b17d82.js"><link rel="prefetch" href="/assets/js/200.526ec0fe.js"><link rel="prefetch" href="/assets/js/201.900d22d4.js"><link rel="prefetch" href="/assets/js/202.dd881fe0.js"><link rel="prefetch" href="/assets/js/203.88a781a4.js"><link rel="prefetch" href="/assets/js/204.2bd9b0d7.js"><link rel="prefetch" href="/assets/js/205.a29ee3cc.js"><link rel="prefetch" href="/assets/js/206.6990ac0d.js"><link rel="prefetch" href="/assets/js/21.77d854b4.js"><link rel="prefetch" href="/assets/js/22.8d12ec70.js"><link rel="prefetch" href="/assets/js/23.73741ba6.js"><link rel="prefetch" href="/assets/js/24.ec27b55d.js"><link rel="prefetch" href="/assets/js/25.e4a31e03.js"><link rel="prefetch" href="/assets/js/26.990b54e4.js"><link rel="prefetch" href="/assets/js/27.0d11e027.js"><link rel="prefetch" href="/assets/js/28.c732ddd1.js"><link rel="prefetch" href="/assets/js/29.ca98d1db.js"><link rel="prefetch" href="/assets/js/3.08ecf5a8.js"><link rel="prefetch" href="/assets/js/30.993ca40b.js"><link rel="prefetch" href="/assets/js/31.e524cf97.js"><link rel="prefetch" href="/assets/js/32.b90f1647.js"><link rel="prefetch" href="/assets/js/33.e97cd24d.js"><link rel="prefetch" href="/assets/js/34.a5fa7a51.js"><link rel="prefetch" href="/assets/js/35.9ff9948d.js"><link rel="prefetch" href="/assets/js/36.b44a4c6d.js"><link rel="prefetch" href="/assets/js/37.b4e910d8.js"><link rel="prefetch" href="/assets/js/38.5e8b8d04.js"><link rel="prefetch" href="/assets/js/39.f18be3ae.js"><link rel="prefetch" href="/assets/js/4.274ed931.js"><link rel="prefetch" href="/assets/js/40.cc26b427.js"><link rel="prefetch" href="/assets/js/41.4635a8cb.js"><link rel="prefetch" href="/assets/js/43.1dfa29ff.js"><link rel="prefetch" href="/assets/js/44.f029d6e5.js"><link rel="prefetch" href="/assets/js/45.6e1400a2.js"><link rel="prefetch" href="/assets/js/46.2b68fbdb.js"><link rel="prefetch" href="/assets/js/47.50641d2e.js"><link rel="prefetch" href="/assets/js/48.9e30f1ff.js"><link rel="prefetch" href="/assets/js/49.51214d26.js"><link rel="prefetch" href="/assets/js/5.4c60c81a.js"><link rel="prefetch" href="/assets/js/50.7ef0886c.js"><link rel="prefetch" href="/assets/js/51.62125bab.js"><link rel="prefetch" href="/assets/js/52.e94baf65.js"><link rel="prefetch" href="/assets/js/53.a850a463.js"><link rel="prefetch" href="/assets/js/54.e50f3d33.js"><link rel="prefetch" href="/assets/js/55.3366aa9c.js"><link rel="prefetch" href="/assets/js/56.e7e40d01.js"><link rel="prefetch" href="/assets/js/57.440c2825.js"><link rel="prefetch" href="/assets/js/58.8a61b7ac.js"><link rel="prefetch" href="/assets/js/59.67a7af4e.js"><link rel="prefetch" href="/assets/js/6.7ac2790d.js"><link rel="prefetch" href="/assets/js/60.95a02a94.js"><link rel="prefetch" href="/assets/js/61.5d02d88a.js"><link rel="prefetch" href="/assets/js/62.393063a7.js"><link rel="prefetch" href="/assets/js/63.fb40c325.js"><link rel="prefetch" href="/assets/js/64.3d32e749.js"><link rel="prefetch" href="/assets/js/65.fd923d90.js"><link rel="prefetch" href="/assets/js/66.1a63eb10.js"><link rel="prefetch" href="/assets/js/67.7dccacf2.js"><link rel="prefetch" href="/assets/js/68.301587c3.js"><link rel="prefetch" href="/assets/js/69.a88077d3.js"><link rel="prefetch" href="/assets/js/7.f01ddce2.js"><link rel="prefetch" href="/assets/js/70.1376f161.js"><link rel="prefetch" href="/assets/js/71.74d2e7b3.js"><link rel="prefetch" href="/assets/js/72.c66b67d3.js"><link rel="prefetch" href="/assets/js/73.5c63b401.js"><link rel="prefetch" href="/assets/js/74.99cdff81.js"><link rel="prefetch" href="/assets/js/75.db5f4126.js"><link rel="prefetch" href="/assets/js/76.3989f0d6.js"><link rel="prefetch" href="/assets/js/77.b9ea0b16.js"><link rel="prefetch" href="/assets/js/78.ffe84afc.js"><link rel="prefetch" href="/assets/js/79.a5e257cb.js"><link rel="prefetch" href="/assets/js/8.ef360448.js"><link rel="prefetch" href="/assets/js/80.fe6dd47c.js"><link rel="prefetch" href="/assets/js/81.170f2312.js"><link rel="prefetch" href="/assets/js/82.4bf508e9.js"><link rel="prefetch" href="/assets/js/83.f254f032.js"><link rel="prefetch" href="/assets/js/84.6d6b4ee3.js"><link rel="prefetch" href="/assets/js/85.fd947648.js"><link rel="prefetch" href="/assets/js/86.7fba54ac.js"><link rel="prefetch" href="/assets/js/87.0a8c4512.js"><link rel="prefetch" href="/assets/js/88.6ed1cecc.js"><link rel="prefetch" href="/assets/js/89.eabdd698.js"><link rel="prefetch" href="/assets/js/9.bdd619c3.js"><link rel="prefetch" href="/assets/js/90.070ae565.js"><link rel="prefetch" href="/assets/js/91.77a3a362.js"><link rel="prefetch" href="/assets/js/92.9c7eef26.js"><link rel="prefetch" href="/assets/js/93.5fd02bb0.js"><link rel="prefetch" href="/assets/js/94.41bc24cf.js"><link rel="prefetch" href="/assets/js/95.0e0f77e6.js"><link rel="prefetch" href="/assets/js/96.ac971122.js"><link rel="prefetch" href="/assets/js/97.c7147668.js"><link rel="prefetch" href="/assets/js/98.4e7c11de.js"><link rel="prefetch" href="/assets/js/99.a35fda5b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0c36c39d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">读书笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book_note/scopeCosuresJS1/" class="nav-link">你不知道的JS(上)</a></li><li class="dropdown-item"><!----> <a href="/book_note/scopeCosuresJS2/" class="nav-link router-link-active">你不知道的JS(中)</a></li><li class="dropdown-item"><!----> <a href="/book_note/scopeCosuresJS3/" class="nav-link">你不知道的JS(下)</a></li><li class="dropdown-item"><!----> <a href="/book_note/JavaScriptDesignPatterns/" class="nav-link">JS设计模式与开发实践</a></li><li class="dropdown-item"><!----> <a href="/cssSecret/" class="nav-link">CSS揭秘</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer_basic/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/computer_basic/recording-leet-code/" class="nav-link">leetcode解题</a></li><li class="dropdown-item"><!----> <a href="/computer_basic/groceries/" class="nav-link">日常问题杂事</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_note/basics-knowledge/" class="nav-link">前端基础</a></li><li class="dropdown-item"><!----> <a href="/front_note/webpack4/" class="nav-link">webpack4</a></li><li class="dropdown-item"><!----> <a href="/front_note/TypeScript-axios/" class="nav-link">TypeScript-axios</a></li><li class="dropdown-item"><!----> <a href="/front_note/react-hooks/" class="nav-link">react-hooks</a></li><li class="dropdown-item"><!----> <a href="/front_note/vue2/" class="nav-link">vue2+</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/buildStation/" class="nav-link">建站小攻略</a></li><li class="dropdown-item"><!----> <a href="/nextjs/" class="nav-link">nextJS</a></li><li class="dropdown-item"><!----> <a href="/sever_note/python/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/sever_note/koa2/" class="nav-link">koa2</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">跨平台</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cross_platform/flutter/" class="nav-link">flutter</a></li><li class="dropdown-item"><!----> <a href="/cross_platform/electron/" class="nav-link">electron</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">杂</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/miscellaneous/Axure/" class="nav-link">Axure</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dogdogbrother/study-code-notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">读书笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/book_note/scopeCosuresJS1/" class="nav-link">你不知道的JS(上)</a></li><li class="dropdown-item"><!----> <a href="/book_note/scopeCosuresJS2/" class="nav-link router-link-active">你不知道的JS(中)</a></li><li class="dropdown-item"><!----> <a href="/book_note/scopeCosuresJS3/" class="nav-link">你不知道的JS(下)</a></li><li class="dropdown-item"><!----> <a href="/book_note/JavaScriptDesignPatterns/" class="nav-link">JS设计模式与开发实践</a></li><li class="dropdown-item"><!----> <a href="/cssSecret/" class="nav-link">CSS揭秘</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer_basic/markdown/" class="nav-link">Markdown</a></li><li class="dropdown-item"><!----> <a href="/computer_basic/recording-leet-code/" class="nav-link">leetcode解题</a></li><li class="dropdown-item"><!----> <a href="/computer_basic/groceries/" class="nav-link">日常问题杂事</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front_note/basics-knowledge/" class="nav-link">前端基础</a></li><li class="dropdown-item"><!----> <a href="/front_note/webpack4/" class="nav-link">webpack4</a></li><li class="dropdown-item"><!----> <a href="/front_note/TypeScript-axios/" class="nav-link">TypeScript-axios</a></li><li class="dropdown-item"><!----> <a href="/front_note/react-hooks/" class="nav-link">react-hooks</a></li><li class="dropdown-item"><!----> <a href="/front_note/vue2/" class="nav-link">vue2+</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/buildStation/" class="nav-link">建站小攻略</a></li><li class="dropdown-item"><!----> <a href="/nextjs/" class="nav-link">nextJS</a></li><li class="dropdown-item"><!----> <a href="/sever_note/python/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/sever_note/koa2/" class="nav-link">koa2</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">跨平台</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cross_platform/flutter/" class="nav-link">flutter</a></li><li class="dropdown-item"><!----> <a href="/cross_platform/electron/" class="nav-link">electron</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">杂</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/miscellaneous/Axure/" class="nav-link">Axure</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dogdogbrother/study-code-notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/book_note/scopeCosuresJS2/1/" class="sidebar-link">第1章.类型</a></li><li><a href="/book_note/scopeCosuresJS2/2/" class="sidebar-link">第2章.值</a></li><li><a href="/book_note/scopeCosuresJS2/3/" class="sidebar-link">第3章.原生函数</a></li><li><a href="/book_note/scopeCosuresJS2/4/" class="sidebar-link">第4章.强制类型转换</a></li><li><a href="/book_note/scopeCosuresJS2/5/" class="active sidebar-link">第5章.语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book_note/scopeCosuresJS2/5/#语句和表达式" class="sidebar-link">语句和表达式</a></li><li class="sidebar-sub-header"><a href="/book_note/scopeCosuresJS2/5/#运算符优先级" class="sidebar-link">运算符优先级</a></li><li class="sidebar-sub-header"><a href="/book_note/scopeCosuresJS2/5/#错误" class="sidebar-link">错误</a></li><li class="sidebar-sub-header"><a href="/book_note/scopeCosuresJS2/5/#try-finally" class="sidebar-link">try..finally</a></li><li class="sidebar-sub-header"><a href="/book_note/scopeCosuresJS2/5/#switch" class="sidebar-link">switch</a></li></ul></li><li><a href="/book_note/scopeCosuresJS2/6/" class="sidebar-link">第6章.异步</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="语法"><a href="#语法" aria-hidden="true" class="header-anchor">#</a> 语法</h1> <h2 id="语句和表达式"><a href="#语句和表达式" aria-hidden="true" class="header-anchor">#</a> 语句和表达式</h2> <h3 id="语句的结果值"><a href="#语句的结果值" aria-hidden="true" class="header-anchor">#</a> 语句的结果值</h3> <p>我们在Chrome浏览器的控制台里面输入内容,通常都先有一个<code>undefined</code>的输出,这是因为<strong>语句都有一个结果值</strong>.</p> <p>举例在控制台中输入 <code>var a = 42</code> 会得到结果值 <code>undefined</code>，而非 42。a的值是42,但规范定义 <code>var</code> 的结果值是<code>undefined</code>。</p> <p>怎么才能让他有值呢,代码举例:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> b<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 b <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">38</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>42即最后一个语句 / 表达式 <code>b = 4 + 38</code> 的结果值。换句话说，代码块的结果值就如同一个<strong>隐式的返回</strong>，即返回最后一个语句的结果值。</p> <p>可以使用万恶的 <code>eval(..)</code> 来获得结果值:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span> <span class="token string">&quot;if (true) { b = 4 + 38; }&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// 42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ES7 规范有一项“do 表达式”（do expression）提案，类似下面这样：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token keyword">do</span> <span class="token punctuation">{</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 b <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">38</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// 42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>do { .. }</code> 表达式执行一个代码块（包含一个或多个语句），并且返回其中最后一个语句的结果值，然后赋值给变量 a。</p> <p>和<code>eval</code>很像是吧,有可能就是为了代替<code>eval</code>吧(我猜的).</p> <p>实际上,其目的是将语句当作表达式来处理（语句中可以包含其他语句），从而不需要将语句封装为函数再调用 <code>return</code> 来返回值。</p> <h3 id="表达式的副作用"><a href="#表达式的副作用" aria-hidden="true" class="header-anchor">#</a> 表达式的副作用</h3> <p>看一段代码来:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token operator">++</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// 43</span>
b<span class="token punctuation">;</span> <span class="token comment">// 42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>也许很多开发者会误以为变量 b 和 a 的值都是 43，这是因为没有完全理解 ++ 运算符的副作用何时产生。</p> <p>++ 在前面时，如 <code>++a</code>，它的副作用（将 a 递增）产生在表达式返回结果值之前，而 <code>a++</code> 的副作用则产生在之后。所以我们<code>++a</code>的话,b就是43了.</p> <p>如果我们一定要<code>a++</code>,可以使用<code>()</code>和<code>,</code>运算符配合上面说的语句结果值.<code>var b = (a++, b);</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">delete</span> obj<span class="token punctuation">.</span>a<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果操作成功，<code>delete</code> 返回 <code>true</code>，否则返回 <code>false</code>。其副作用是属性被从对象中删除（或者单元从 array 中删除）。</p> <p>我们看下利用赋值语句的副作用将两个 <code>if</code> 语句合二为一的例子,先看下原代码:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">vowels</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> matches<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 提取所有元音字母</span>
    matches <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> <span class="token regex">/[aeiou]/g</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>matches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> matches<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">vowels</span><span class="token punctuation">(</span> <span class="token string">&quot;Hello World&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;e&quot;,&quot;o&quot;,&quot;o&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>新代码:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">vowels</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> matches<span class="token punctuation">;</span>
  <span class="token comment">// 提取所有元音字母</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>matches <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> <span class="token regex">/[aeiou]/g</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> matches<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">vowels</span><span class="token punctuation">(</span> <span class="token string">&quot;Hello World&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;e&quot;,&quot;o&quot;,&quot;o&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>利用了()和结果值,让代码更简洁了一些.</p> <h3 id="上下文规则"><a href="#上下文规则" aria-hidden="true" class="header-anchor">#</a> 上下文规则</h3> <h4 id="大括号"><a href="#大括号" aria-hidden="true" class="header-anchor">#</a> 大括号</h4> <ol><li>用大括号定义对象常量</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 假定函数bar()已经定义</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
 foo<span class="token punctuation">:</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>{ .. } 被赋值给 a，因而它是一个对象常量。</p> <ol start="2"><li>标签
如果将上例中的 var a = 去掉会发生什么情况呢？</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
 foo<span class="token punctuation">:</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>{ .. } 在这里只是一个普通的代码块。但是这里有个问题,既然不是对象了,为什么 <code>foo: bar()</code> 这样奇怪的语法为什么也合法呢？</p> <p>这里涉及 JavaScript 中一个不太为人知（也不建议使用）的特性，叫作“标签语句”（labeled statement）。</p> <ol start="3"><li>JSON
JSON 的确是 JavaScript 语法的一个子集，但是 JSON 本身并不是合法的 JavaScript 语法。</li></ol> <p>JSON的key值是必须需要用&quot;&quot;包起来的,<code>{&quot;a&quot;:42}</code> 作为 JSON 值没有任何问题，但是在作为代码执行时会产生错误，因为它会被当作一个带有非法标签的语句块来执行。</p> <p><code>{&quot;a&quot;:42}</code> 作为 JSON 值没有任何问题，但是在作为代码执行时会产生错误，因为它会被当作一个带有非法标签的语句块来执行。<code>foo({&quot;a&quot;:42})</code> 就没有这个问题，因为 <code>{&quot;a&quot;:42}</code> 在这里是一个传递给 <code>foo(..)</code> 的对象常量。</p> <p>所以准确地说，JSON-P 能将 JSON 转换为合法的JavaScript 语法。</p> <ol start="4"><li>代码块
还有一个坑常被提到,涉及强制类型转换.</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// &quot;[object Object]&quot;</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>表面上看 + 运算符根据第一个操作数（[] 或 {}）的不同会产生不同的结果，实则不然。</p> <p>{} 在后面的时候是被当作一个值（空对象）来处理,[] 会被强制类型转换为 &quot;&quot;,所以空对象就是&quot;[object Object]&quot;。</p> <p>{} 在前面的时候,会被当作一个独立的空代码块,[]会转成0.</p> <ol start="5"><li><p>对象解构
从 ES6 开始，<code>{ .. }</code> 也可用于“解构赋值”,<code>{ a, b }</code> 实际上是 <code>{ a: a, b: b }</code> 的简化版本，两者均可.</p></li> <li><p>else if 和可选代码块
很多人误以为 JavaScript 中有 else if，因为我们可以这样来写代码：</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 <span class="token comment">// ..</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// .. </span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> 
 <span class="token comment">// ..</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>然而事实上,<code>JavaScript</code> 没有 <code>else if</code>，但 <code>if</code> 和 <code>else</code> 只包含单条语句的时候可以省略代码块的<code>{ }</code>。</p> <p>什么意思呢,举个例子,我们简写,在if后面可以不加<code>{}</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">doSomething</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token function">doSomething</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 简写</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>自然<code>else</code>后面也可以不用加{}.那么其实else if的真实样子是这样的:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 <span class="token comment">// ..</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token comment">// ..</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// .. </span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>else if</code> 极为常见，能省掉一层代码缩进，所以很受青睐。但这只是我们自己发明的用法，切勿想当然地认为这些都属于 <code>JavaScript</code> 语法的范畴。</p> <h2 id="运算符优先级"><a href="#运算符优先级" aria-hidden="true" class="header-anchor">#</a> 运算符优先级</h2> <p>JavaScript 中的 <code>&amp;&amp;</code> 和 <code>||</code> 运算符返回它们其中一个操作数的值，而非<code>true</code> 或 <code>false</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
a <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">;</span> <span class="token comment">// &quot;foo&quot;</span>
a <span class="token operator">||</span> b<span class="token punctuation">;</span> <span class="token comment">// 42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>但是如果我们有多个运算符呢?</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a <span class="token operator">&amp;&amp;</span> b <span class="token operator">||</span> c<span class="token punctuation">;</span> <span class="token comment">// ???</span>
a <span class="token operator">||</span> b <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">;</span> <span class="token comment">// ???</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这就涉及到了运算符的优先级的问题了,我们回顾下前面的例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span> b<span class="token punctuation">;</span>
b <span class="token operator">=</span> <span class="token punctuation">(</span> a<span class="token operator">++</span><span class="token punctuation">,</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// 43</span>
b<span class="token punctuation">;</span> <span class="token comment">// 43</span>

<span class="token comment">// 如果没有(),结果就会不一样</span>

b <span class="token operator">=</span> <span class="token punctuation">(</span> a<span class="token operator">++</span><span class="token punctuation">,</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">;</span> <span class="token comment">// 43</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这是因为<code>,</code>的优先级比<code>=</code>低,事实上<code>,</code>是所以运算符中最低级的.</p> <p>再回顾前面的一个例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>matches <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> <span class="token regex">/[aeiou]/g</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// ..</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里对赋值语句使用 <code>( )</code> 是必要的，因为 <code>&amp;&amp;</code> 运算符的优先级高于 <code>=</code>，如果没有 <code>( )</code> 对其中的表达式进行绑定（bind）的话，就会执行作 <code>(str &amp;&amp; matches) = str.match..</code>,这样会出错.</p> <p><code>a || b &amp;&amp; c;</code>的结果值是a,因为<code>&amp;</code>优先级比<code>||</code>高.</p> <p>如果想看完整的全部的优先级列表,请参考 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener noreferrer">MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的详细说明.</p> <h3 id="短路"><a href="#短路" aria-hidden="true" class="header-anchor">#</a> 短路</h3> <p>对 <code>&amp;&amp;</code> 和 <code>||</code> 来说，如果从左边的操作数能够得出结果，就可以忽略右边的操作数。我们将这种现象称为“短路”（即执行最短路径）。</p> <p>这个其实是非常有用而且常用的一个特性,我们可以节省很多if语句,节省代码.举例说明:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行A此代码'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行B此代码'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>优化后的短路代码如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a <span class="token operator">&amp;&amp;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行A此代码'</span><span class="token punctuation">)</span>
a <span class="token operator">||</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行B此代码'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="错误"><a href="#错误" aria-hidden="true" class="header-anchor">#</a> 错误</h2> <p>JavaScript 不仅有各种类型的运行时错误（TypeError、ReferenceError、SyntaxError 等），它的语法中也定义了一些编译时错误。</p> <p>在编译阶段发现的代码错误叫作“早期错误”,这些错误在代码执行之前是无法用 <code>try..catch</code> 来捕获的，相反，它们还会导致解析 / 编译失败。</p> <p>举几个例子:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token regex">/+foo/</span><span class="token punctuation">;</span> <span class="token comment">// 错误！不合法的的正则表达式</span>
<span class="token keyword">var</span> a<span class="token punctuation">;</span>
<span class="token number">42</span> <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// 错误！语法规定赋值对象必须是一个标识符</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ES5 规范的严格模式定义了很多早期错误。函数的参数不能重名,对象常量不能包含多个同名属性.</p> <h3 id="提前使用变量"><a href="#提前使用变量" aria-hidden="true" class="header-anchor">#</a> 提前使用变量</h3> <p>ES6 规范定义了一个新概念，叫作 TDZ（Temporal Dead Zone，暂时性死区）。</p> <p>TDZ 指的是由于代码中的变量还没有初始化而不能被引用的情况。</p> <p>对此，最直观的例子是 ES6 规范中的 let 块作用域：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
 a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError!</span>
 <span class="token keyword">let</span> a<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>a = 2</code> 试图在 <code>let a</code> 初始化 <code>a</code> 之前使用该变量（其作用域在 { .. } 内），这里就是 <code>a</code> 的TDZ，会产生错误。</p> <h3 id="函数参数"><a href="#函数参数" aria-hidden="true" class="header-anchor">#</a> 函数参数</h3> <p>另一个 TDZ 违规的例子是 ES6 中的参数默认值.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span> <span class="token parameter">a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span> b <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token operator">+</span> <span class="token number">5</span></span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// ..</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>b = a + b + 5</code> 在参数 b（= 右边的 b，而不是函数外的那个）的 TDZ 中访问 b，所以会出错。而访问 a 却没有问题，因为此时刚好跨出了参数 a 的 TDZ。</p> <p>在 ES6 中，如果参数被省略或者值为 undefined，则取该参数的默认值,代码示例如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span> <span class="token parameter">a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span> b <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">1</span></span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 42 43</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 42 43</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5 6</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 42 7</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="try-finally"><a href="#try-finally" aria-hidden="true" class="header-anchor">#</a> try..finally</h2> <p><code>try..catch</code>是比较常用的,但是其实也可以使用<code>try..finally</code>,就是不管结局如何都会执行finally内容.</p> <h2 id="switch"><a href="#switch" aria-hidden="true" class="header-anchor">#</a> switch</h2> <p>现在来简单介绍一下 switch，可以把它看作 if..else if..else.. 的简化版本：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
 <span class="token comment">// 执行一些代码</span>
 <span class="token keyword">break</span><span class="token punctuation">;</span>
 <span class="token keyword">case</span> <span class="token number">42</span><span class="token punctuation">:</span>
 <span class="token comment">// 执行另外一些代码</span>
 <span class="token keyword">break</span><span class="token punctuation">;</span>
 <span class="token keyword">default</span><span class="token punctuation">:</span>
 <span class="token comment">// 执行缺省代码</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这看似并无特别之处，但其中存在一些不太为人所知的陷阱。</p> <p>a 和 case 表达式的匹配算法与 <code>===</code> 相同,如果我们不知道a到底是<code>'1'</code>还是<code>1</code>的情况下,我们可以如下使用:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> a <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">:</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;10 or '10'&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> a <span class="token operator">==</span> <span class="token number">42</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;42 or '42'&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span>
 <span class="token comment">// 永远执行不到这里</span>
<span class="token punctuation">}</span>
<span class="token comment">// 42 or '42'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>需要注意的是,case后面跟的比较是true或者false,而不能是真值,例如1和0这种的.</p> <p>default 是可选的，并非必不可少,而且不一定非要在最后面,break 相关规则对 default 仍然适用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
  <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
  <span class="token comment">// 永远执行不到这里</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;default&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;3&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;4&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// default</span>
<span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>代码分析:</strong> 首先全部执行了一遍,发现没有合适的,就default,但是没有break,就又走了case 3,然后结束.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/book_note/scopeCosuresJS2/4/" class="prev">第4章.强制类型转换</a></span> <span class="next"><a href="/book_note/scopeCosuresJS2/6/">第6章.异步</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1c103905.js" defer></script><script src="/assets/js/2.757f8567.js" defer></script><script src="/assets/js/42.67ce10bd.js" defer></script>
  </body>
</html>
